# J01组 大学生竞赛服务平台 交付文档

## 一、交付产品



## 二、产品目标



## 三、开发组织管理



## 四、系统设计

### 1、前端交互



### 2、后端模块



### 3、接口规范



### 4、数据库设计



## 五、重难点问题及其解决方法

### 1、前端部分



### 2、后端部分



### 3、其他部分



## 六、产品特色与亮点



## 七、测试总结

前后端在开发过程中注意对接，每实现一个子功能就进行了细致的功能测试和回归测试，保证新功能正常且未影响原有功能。

同时，每完成一次迭代，就进行部署测试，在生产环境中验证功能的正确性和健壮性。

此外，后端针对重点功能进行了单元测试，使用 Django 自带的 test 模块（基于 Python 的 unittest）进行了高覆盖率的测试。

具体代码详见代码仓库的 `backend` 分支下的 `SE_Backend/ContestPlus/backend_test` 目录。

## 八、系统部署

##### 1. 安装环境依赖

部署依赖于 docker、docker-compose、npm 等，需要先行安装。

##### 2. 克隆远程仓库

首先将远程仓库克隆至本地。在用户目录下执行

`git clone -b release https://github.com/cobs14/SE_ContestServicePlatform.git`

将得到一名为 `SE_ContestServicePlatform` 的文件夹，进入该文件夹的 `frontend` 子文件夹下，先后执行 `npm install` 和 `npm run build` 指令以安装前端依赖和编译生产版本。

##### 3. 设置环境变量

在  `SE_ContestServicePlatform` 目录下新建一名为 `.env` 的文件，文件内写入欲新建的数据库名和密码，格式如下所示，**具体值自定**。

```
MYSQL_ROOT_PASSWORD=2018013013
MYSQL_DATABASE=ContestPlus
```

设置好相应的数据库名和密码后，还需要对 `SE_ContestServicePlatform/SE_Backend/SE_Backend/settings.py` 中的 `DATABASES` 做相应修改。

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'ContestPlus',  # 对应 MYSQL_DATABASE
        'USER': 'root',
        'PASSWORD': '2018013013',  # 对应 MYSQL_ROOT_PASSWORD
        'HOST': 'db',
        'PORT': '3306',
    }
}
```

然后，将 `SE_ContestServicePlatform/config` 文件夹整体复制到 `~/contest_plus` 文件夹下。

##### 4. docker-compose 构建并运行应用

完成以上步骤后进行构建并启动。在  `SE_ContestServicePlatform` 目录下执行 `docker-compose up -d` 即可。

可通过 `docker-compose down` 指令停止并删除容器。

数据库文件映射在 `~/contest_plus/mysql` 文件夹下。

由于应用了 `https`，默认配置了域名 `contestplus.cn` 的 SSL 证书，如需更换域名，需要将相关证书文件存放入 `~/contest_plus/config/nginx` 文件夹下，并修改该文件夹中的 `app.conf` 的相关配置。

